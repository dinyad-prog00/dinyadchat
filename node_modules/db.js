
var pg = require('pg');
var conString = "postgres://donatien:node2021@localhost:5432/chat";

var bdd = new pg.Client(conString);
bdd.connect();


 exports.create= async (c)=>{

	var s = await bdd.query("insert into users (pseudo,pwd) values ($1,$2) returning id",[c.sd,c.pwd]);
	s.rows.forEach(  (row)=> {
    	return row.id;
	});
}

exports.login = async (c) =>{
	
	var s = await bdd.query("select * from users where pseudo=$1 and pwd=$2",[c.sd,c.pwd]);
	s.rows.forEach(  (row)=> {
    	return true;
	});

	return false;
}

